
public class Player {
	private Genome brain;
	private int in , out , gen;
	private int[] decision;
	private boolean isDead;
	private float fitness;
	private Game game;
	public float score;
	
	public Player (Game game, int in, int out) {
		brain = new Genome(in, out);
		this.game = game;
		isDead = false;
		fitness = 0f;
		score = 0f;
		gen = 0;
	}
	
	public void move() {
		float max = 0;
	    int maxIndex = 0;
	    //get the output of the neural network
	    decision = brain.feedForward(game.getEnv());

	    for (int i = 0; i < decision.length; i++) {
	      if (decision[i] > max) {
	        max = decision[i];
	        maxIndex = i;
	      }
	    }
	    game.doMove(maxIndex);
	    score += game.response();
	    isDead = game.isEnd();
	}
	
	public Player clone() {
	    Player clone = new Player(game.clone(), in, out);
	    clone.brain = (Genome) brain.clone();
	    clone.fitness = fitness;
	    clone.brain.generateNetwork(); 
	    clone.gen = gen;
	    return clone;
	}

	public boolean isDead() {
		return isDead;
	}

	public Player crossover(Player parent2) {
	    Player child = new Player(game.clone(), in, out);
	    child.brain = brain.crossover(parent2.brain);
	    child.brain.generateNetwork();
	    return child;
	}
}
